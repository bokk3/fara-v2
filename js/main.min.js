function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);if(n){const e=document.querySelector(".navbar"),t=e?e.offsetHeight:0,i=n.offsetTop-t;window.scrollTo({top:i,behavior:"smooth"});const a=document.querySelector(".navbar-collapse");if(a&&a.classList.contains("show")){new bootstrap.Collapse(a,{toggle:!0})}}})})}function initActiveSectionHighlighting(){let e=!1;window.addEventListener("scroll",function(){e||(e=!0,setTimeout(()=>{updateActiveNavLink(),e=!1},100))}),updateActiveNavLink()}function updateActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelector(".navbar"),n=t?t.offsetHeight:0,i=window.scrollY+n+100;let a="";e.forEach(e=>{const t=e.offsetTop,n=e.offsetHeight,o=e.getAttribute("id");i>=t&&i<t+n&&(a=o)}),window.scrollY<100&&(a="home");document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active");e.getAttribute("href")===`#${a}`&&e.classList.add("active")})}function initGalleryLightbox(){const e=document.querySelectorAll(".gallery-item img"),t=document.getElementById("modalImage"),n=document.getElementById("galleryModal");if(!t||!n)return void console.warn("Gallery modal elements not found");e.forEach(e=>{e.setAttribute("tabindex","0"),e.setAttribute("role","button"),e.addEventListener("click",function(){openGalleryModal(this,t)}),e.addEventListener("keydown",function(e){if("Enter"===e.key||" "===e.key){e.preventDefault(),openGalleryModal(this,t);new bootstrap.Modal(n).show()}})}),n.addEventListener("keydown",function(e){if("Escape"===e.key){const e=bootstrap.Modal.getInstance(n);e&&e.hide()}}),n.addEventListener("hidden.bs.modal",function(){t.setAttribute("src",""),t.setAttribute("alt","")});let i=null;n.addEventListener("show.bs.modal",function(){i=document.activeElement}),n.addEventListener("hidden.bs.modal",function(){i&&i.focus()}),initGalleryCarousel()}function openGalleryModal(e,t){const n=e.getAttribute("data-image"),i=e.getAttribute("alt");n&&(t.setAttribute("src",n),t.setAttribute("alt",i||"Gallery image"))}function initGalleryCarousel(){const e=document.querySelector(".gallery-track"),t=document.querySelector(".gallery-arrow-prev"),n=document.querySelector(".gallery-arrow-next");if(!e||!t||!n)return void console.warn("Gallery carousel elements not found");const i=424;function a(t){e.scrollBy({left:t,behavior:"smooth"})}function o(){const i=e.scrollLeft,a=e.scrollWidth-e.clientWidth;i<=0?(t.style.opacity="0.5",t.style.cursor="default",t.setAttribute("aria-disabled","true")):(t.style.opacity="1",t.style.cursor="pointer",t.setAttribute("aria-disabled","false")),i>=a-5?(n.style.opacity="0.5",n.style.cursor="default",n.setAttribute("aria-disabled","true")):(n.style.opacity="1",n.style.cursor="pointer",n.setAttribute("aria-disabled","false"))}t.addEventListener("click",function(){a(-424)}),t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(-424))}),n.addEventListener("click",function(){a(i)}),n.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(i))}),e.addEventListener("scroll",o),o(),window.addEventListener("resize",o),e.addEventListener("keydown",function(e){"ArrowLeft"===e.key?(e.preventDefault(),a(-424)):"ArrowRight"===e.key&&(e.preventDefault(),a(i))})}function initContactForm(){const e=document.getElementById("contactForm"),t=document.getElementById("formStatus");if(!e||!t)return void console.warn("Contact form elements not found");e.addEventListener("submit",async function(n){n.preventDefault(),validateForm(e)&&await submitForm(e,t)});e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",function(){validateField(this)}),e.addEventListener("input",function(){this.classList.contains("is-invalid")&&this.classList.remove("is-invalid")})})}function validateForm(e){let t=!0;const n=e.querySelector("#name"),i=e.querySelector("#email"),a=e.querySelector("#message");return validateField(n)||(t=!1),validateField(i)||(t=!1),validateField(a)||(t=!1),e.classList.add("was-validated"),t}function validateField(e){return!e||(e.hasAttribute("required")&&!e.value.trim()||"email"===e.type&&e.value.trim()&&!validateEmail(e.value.trim())?(e.classList.add("is-invalid"),e.classList.remove("is-valid"),!1):(e.classList.remove("is-invalid"),e.classList.add("is-valid"),!0))}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async function submitForm(e,t){const n=e.querySelector('button[type="submit"]'),i=n.textContent;n.disabled=!0,n.innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Sending...',t.innerHTML="";try{const n=new FormData(e);if((await fetch(e.action,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok){displaySuccessMessage(t),e.reset(),e.classList.remove("was-validated");e.querySelectorAll("input, textarea").forEach(e=>{e.classList.remove("is-valid","is-invalid")})}else displayErrorMessage(t)}catch(e){console.error("Form submission error:",e),displayErrorMessage(t)}finally{n.disabled=!1,n.textContent=i}}function displaySuccessMessage(e){e.innerHTML='\n    <div class="alert alert-success alert-dismissible fade show" role="alert">\n      <i class="bi bi-check-circle-fill me-2"></i>\n      <strong>Thank you!</strong> Your message has been sent successfully. I\'ll get back to you soon!\n      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n    </div>\n  '}function displayErrorMessage(e){e.innerHTML='\n    <div class="alert alert-danger alert-dismissible fade show" role="alert">\n      <i class="bi bi-exclamation-triangle-fill me-2"></i>\n      <strong>Oops!</strong> There was a problem sending your message. Please try again or contact me directly via email.\n      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n    </div>\n  '}function setCurrentYear(){const e=document.getElementById("currentYear");e&&(e.textContent=(new Date).getFullYear())}function initImageErrorHandling(){document.querySelectorAll("img").forEach(e=>{e.addEventListener("error",function(){handleImageError(this)}),e.complete&&0!==e.naturalHeight||e.addEventListener("load",function(){})})}function handleImageError(e){if(e.classList.contains("image-error"))return;e.classList.add("image-error");const t=createPlaceholderSvg(e.alt||"Image not available");e.src=t,e.alt&&""!==e.alt.trim()||(e.alt="Image not available"),console.warn("Image failed to load:",e.dataset.image||e.getAttribute("data-image")||"unknown source")}function createPlaceholderSvg(e){const t=e.length>30?e.substring(0,27)+"...":e;return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`\n    <svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300">\n      <rect width="400" height="300" fill="#e9ecef"/>\n      <g transform="translate(200, 150)">\n        <circle cx="0" cy="-20" r="30" fill="#adb5bd" opacity="0.5"/>\n        <path d="M -40 20 L -40 -10 L 40 -10 L 40 20 Z" fill="#adb5bd" opacity="0.5"/>\n        <circle cx="-15" cy="-25" r="8" fill="#6c757d" opacity="0.7"/>\n        <path d="M -40 20 L -10 -5 L 10 5 L 40 -15 L 40 20 Z" fill="#6c757d" opacity="0.7"/>\n      </g>\n      <text x="200" y="260" font-family="Arial, sans-serif" font-size="14" fill="#6c757d" text-anchor="middle">\n        ${t}\n      </text>\n    </svg>\n  `)}document.addEventListener("DOMContentLoaded",function(){console.log("Coach Dance Website loaded successfully"),initSmoothScroll(),initActiveSectionHighlighting(),initGalleryLightbox(),initContactForm(),setCurrentYear(),initImageErrorHandling()});